# åšå®¢APIé¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªåŸºäºSpring Bootçš„åšå®¢ç³»ç»ŸAPIï¼Œæä¾›æ–‡ç« çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œé‡‡ç”¨ç»Ÿä¸€çš„APIå“åº”æ ¼å¼ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨é¡¹ç›®
```bash
mvn spring-boot:run
```

### è®¿é—®åœ°å€
- **APIæ–‡æ¡£**: http://localhost:8080/swagger-ui.html
- **é¦–é¡µ**: http://localhost:8080/
- **å¥åº·æ£€æŸ¥**: http://localhost:8080/health
- **H2æ•°æ®åº“æ§åˆ¶å°**: http://localhost:8080/h2-console

## ğŸ“š APIæ–‡æ¡£

### åœ¨çº¿æ–‡æ¡£
å¯åŠ¨é¡¹ç›®åï¼Œè®¿é—® **http://localhost:8080/swagger-ui.html** æŸ¥çœ‹å®Œæ•´çš„APIæ–‡æ¡£ã€‚

### ä¸»è¦æ¥å£

#### 1. æ–‡ç« ç®¡ç†æ¥å£ (`/api/posts`)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/posts` | è·å–æ‰€æœ‰æ–‡ç«  |
| GET | `/api/posts/{id}` | è·å–æŒ‡å®šæ–‡ç«  |
| POST | `/api/posts` | åˆ›å»ºæ–°æ–‡ç«  |
| PUT | `/api/posts/{id}` | æ›´æ–°æ–‡ç«  |
| DELETE | `/api/posts/{id}` | åˆ é™¤æ–‡ç«  |
| GET | `/api/posts/author/{author}` | æ ¹æ®ä½œè€…è·å–æ–‡ç«  |
| GET | `/api/posts/search?title=å…³é”®è¯` | æœç´¢æ–‡ç«  |

#### 2. ç³»ç»Ÿæ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/` | é¦–é¡µä¿¡æ¯ |
| GET | `/health` | å¥åº·æ£€æŸ¥ |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/main/java/com/meiyang/blog_api/
â”œâ”€â”€ BlogApiApplication.java          # å¯åŠ¨ç±»
â”œâ”€â”€ config/
â”‚   â””â”€â”€ OpenApiConfig.java          # Swaggeré…ç½®
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ ApiResponse.java            # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â””â”€â”€ PageResponse.java           # åˆ†é¡µå“åº”æ ¼å¼
â”œâ”€â”€ controller/                      # æ§åˆ¶å±‚
â”‚   â”œâ”€â”€ HomeController.java         # é¦–é¡µæ§åˆ¶å™¨
â”‚   â””â”€â”€ PostController.java         # æ–‡ç« æ§åˆ¶å™¨
â”œâ”€â”€ service/                        # æœåŠ¡å±‚
â”‚   â””â”€â”€ PostService.java           # æ–‡ç« ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ repository/                     # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ PostRepository.java        # æ–‡ç« æ•°æ®è®¿é—®
â””â”€â”€ entity/                        # å®ä½“å±‚
    â””â”€â”€ Post.java                  # æ–‡ç« å®ä½“
```

## ğŸ“‹ åˆ†å±‚æ¶æ„è¯´æ˜

### 1. **Controllerå±‚** (æ§åˆ¶å±‚)
- å¤„ç†HTTPè¯·æ±‚å’Œå“åº”
- æ¥æ”¶å®¢æˆ·ç«¯å‚æ•°
- è°ƒç”¨Serviceå±‚å¤„ç†ä¸šåŠ¡é€»è¾‘
- è¿”å›å¤„ç†ç»“æœ

### 2. **Serviceå±‚** (æœåŠ¡å±‚)
- å¤„ç†ä¸šåŠ¡é€»è¾‘
- è°ƒç”¨Repositoryå±‚è¿›è¡Œæ•°æ®æ“ä½œ
- æä¾›äº‹åŠ¡ç®¡ç†

### 3. **Repositoryå±‚** (æ•°æ®è®¿é—®å±‚)
- ä¸æ•°æ®åº“äº¤äº’
- æä¾›æ•°æ®å¢åˆ æ”¹æŸ¥æ–¹æ³•
- åŸºäºSpring Data JPA

### 4. **Entityå±‚** (å®ä½“å±‚)
- å®šä¹‰æ•°æ®æ¨¡å‹
- æ˜ å°„æ•°æ®åº“è¡¨ç»“æ„
- åŒ…å«æ•°æ®éªŒè¯è§„åˆ™

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Spring Boot 3.5.3** - ä¸»æ¡†æ¶
- **Spring Data JPA** - æ•°æ®è®¿é—®
- **H2 Database** - å†…å­˜æ•°æ®åº“
- **Lombok** - ä»£ç ç®€åŒ–
- **Swagger/OpenAPI** - APIæ–‡æ¡£

## ğŸ“Š ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰APIæ¥å£éƒ½ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

### æˆåŠŸå“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "title": "æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢",
    "content": "è¿™æ˜¯æ–‡ç« çš„å†…å®¹...",
    "author": "å¼ ä¸‰",
    "createdAt": "2024-01-01T10:00:00",
    "updatedAt": "2024-01-01T10:00:00"
  },
  "timestamp": "2024-01-01T10:00:00",
  "path": "/api/posts"
}
```

### é”™è¯¯å“åº”ç¤ºä¾‹
```json
{
  "code": 404,
  "message": "æ–‡ç« ä¸å­˜åœ¨",
  "data": null,
  "timestamp": "2024-01-01T10:00:00",
  "path": "/api/posts/999"
}
```

### å“åº”å­—æ®µè¯´æ˜
- **code**: çŠ¶æ€ç  (200æˆåŠŸ, 400é”™è¯¯è¯·æ±‚, 404æœªæ‰¾åˆ°, 500æœåŠ¡å™¨é”™è¯¯)
- **message**: å“åº”æ¶ˆæ¯
- **data**: å“åº”æ•°æ®
- **timestamp**: å“åº”æ—¶é—´
- **path**: è¯·æ±‚è·¯å¾„

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºæ–‡ç« 
```bash
curl -X POST http://localhost:8080/api/posts \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢",
    "content": "è¿™æ˜¯æ–‡ç« çš„å†…å®¹...",
    "author": "å¼ ä¸‰"
  }'
```

### è·å–æ‰€æœ‰æ–‡ç« 
```bash
curl http://localhost:8080/api/posts
```

### è·å–æŒ‡å®šæ–‡ç« 
```bash
curl http://localhost:8080/api/posts/1
```

### æ›´æ–°æ–‡ç« 
```bash
curl -X PUT http://localhost:8080/api/posts/1 \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æ›´æ–°åçš„æ ‡é¢˜",
    "content": "æ›´æ–°åçš„å†…å®¹",
    "author": "å¼ ä¸‰"
  }'
```

### åˆ é™¤æ–‡ç« 
```bash
curl -X DELETE http://localhost:8080/api/posts/1
```

### æœç´¢æ–‡ç« 
```bash
curl "http://localhost:8080/api/posts/search?title=Spring"
```

### æ ¹æ®ä½œè€…æŸ¥è¯¢
```bash
curl http://localhost:8080/api/posts/author/å¼ ä¸‰
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®
- **ç±»å‹**: H2å†…å­˜æ•°æ®åº“
- **URL**: jdbc:h2:mem:blogdb
- **ç”¨æˆ·å**: sa
- **å¯†ç **: (ç©º)

### APIæ–‡æ¡£é…ç½®
- **Swagger UI**: http://localhost:8080/swagger-ui.html
- **APIæ–‡æ¡£**: http://localhost:8080/api-docs

## ğŸ“Š æ•°æ®æ¨¡å‹

### Post (æ–‡ç« å®ä½“)
```json
{
  "id": 1,
  "title": "æ–‡ç« æ ‡é¢˜",
  "content": "æ–‡ç« å†…å®¹",
  "author": "ä½œè€…",
  "createdAt": "2024-01-01T10:00:00",
  "updatedAt": "2024-01-01T10:00:00"
}
```

## ğŸ¯ å¼€å‘å»ºè®®

1. **æŸ¥çœ‹APIæ–‡æ¡£**: å¯åŠ¨é¡¹ç›®åè®¿é—®Swagger UIæŸ¥çœ‹å®Œæ•´æ¥å£
2. **æµ‹è¯•æ¥å£**: ä½¿ç”¨curlæˆ–Postmanæµ‹è¯•å„ä¸ªæ¥å£
3. **æ•°æ®åº“ç®¡ç†**: è®¿é—®H2æ§åˆ¶å°æŸ¥çœ‹æ•°æ®
4. **æ—¥å¿—æŸ¥çœ‹**: æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—äº†è§£è¯·æ±‚å¤„ç†è¿‡ç¨‹
5. **ç»Ÿä¸€å“åº”**: æ‰€æœ‰æ¥å£éƒ½ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å¤„ç†

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘è€…æˆ–æŸ¥çœ‹APIæ–‡æ¡£è·å–æ›´å¤šä¿¡æ¯ã€‚